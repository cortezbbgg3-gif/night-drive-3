@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Manrope:wght@400;800&display=swap');

:root {
  --gauge-bg: #050505;
  --rim-color: #222;
  --glow-orange: #ff9d00;
  --glow-red: #ff3333;
}

body { margin: 0; background: #000; overflow: hidden; user-select: none; font-family: 'Manrope', sans-serif; -webkit-touch-callout: none; }
#root { width: 100%; height: 100%; position: relative; }

/* 3D МИР */
#canvas-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }

/* UI СЛОЙ */
.ui-layer {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10;
  pointer-events: none; /* Пропускаем клики сквозь пустоту */
  display: flex; flex-direction: column; justify-content: flex-end;
}

/* === САЛОН (INTERIOR) === */
.interior-frame {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  pointer-events: none; z-index: 5;
}

.pillar-left, .pillar-right {
  position: absolute; top: 0; width: 12vmin; height: 120%;
  background: linear-gradient(90deg, #0a0a0a, #151515);
  box-shadow: 5px 0 20px #000;
}
.pillar-left { left: -2vmin; transform: skewX(8deg); border-right: 2px solid #222; }
.pillar-right { right: -2vmin; transform: skewX(-8deg); border-left: 2px solid #222; }

.roof-shade {
  position: absolute; top: 0; left: 0; width: 100%; height: 15vmin;
  background: linear-gradient(to bottom, #050505, transparent);
}

/* СООБЩЕНИЯ */
.warning-msg {
  position: absolute; top: 25%; left: 50%; transform: translateX(-50%);
  color: red; font-family: 'Orbitron'; font-size: 4vmin; border: 2px solid red;
  padding: 1vmin 3vmin; background: rgba(0,0,0,0.9);
  animation: blink 0.2s infinite; z-index: 100;
}

/* === ТОРПЕДО (DASHBOARD) === */
.dashboard-body {
  position: relative; 
  width: 100%; 
  height: 50vmin; 
  background: #111; /* Темный пластик */
  background-image: repeating-linear-gradient(45deg, #111 0, #111 2px, #141414 2px, #141414 4px); /* Карбон/Пластик */
  border-top: 0.5vmin solid #333;
  border-radius: 15vmin 15vmin 0 0; /* Закругление сверху */
  
  display: flex; flex-direction: column; align-items: center; justify-content: flex-end;
  pointer-events: auto; /* ВАЖНО: ЧТОБЫ КНОПКИ РАБОТАЛИ */
  box-shadow: 0 -5vmin 20vmin #000;
  z-index: 20;
}

/* КОЗЫРЕК (УБРАЛ ДВОЙНУЮ ОБВОДКУ) */
.cluster-area {
  display: flex; justify-content: center; align-items: center; gap: 5vmin;
  margin-bottom: 2vmin;
  transform: translateY(2vmin); /* Чуть утоплен */
}

/* === ПРИБОРЫ === */
.gauge-well {
  width: 32vmin; height: 32vmin;
  background: radial-gradient(circle, #1a1a1a, #000);
  border-radius: 50%;
  border: 0.6vmin solid #333;
  box-shadow: inset 0 0 5vmin #000, 0 1vmin 2vmin #000;
  position: relative;
}

.gauge-face { width: 100%; height: 100%; position: relative; border-radius: 50%; }

/* РИСКИ И ЦИФРЫ */
.tick-mark {
  position: absolute; top: 0; left: 50%; background: #777;
  transform-origin: center 16vmin; /* Половина размера gauge-well */
}
.tick-mark.big { width: 0.5vmin; height: 2.5vmin; background: #fff; top: 1vmin; transform-origin: center 15vmin; }
.tick-mark.small { width: 0.2vmin; height: 1.5vmin; background: #444; top: 1.5vmin; transform-origin: center 14.5vmin; }

.tick-num {
  position: absolute; transform: translate(-50%, -50%);
  color: #eee; font-family: 'Manrope'; font-weight: 800; font-size: 2vmin;
}

/* СТРЕЛКИ */
.needle-container {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  transition: transform 0.1s cubic-bezier(0.1, 0, 0.2, 1);
}
.needle {
  position: absolute; top: 12%; left: 50%; width: 0.8vmin; height: 38%;
  background: #ff3333; transform: translateX(-50%);
  border-radius: 0.5vmin; box-shadow: 0 0 1vmin red; z-index: 5;
}
.needle.orange { background: #ff9d00; box-shadow: 0 0 1vmin #ff9d00; }

.gauge-cap {
  position: absolute; top: 50%; left: 50%; width: 5vmin; height: 5vmin;
  background: #151515; border: 0.4vmin solid #333; border-radius: 50%;
  transform: translate(-50%, -50%); z-index: 6;
}

/* ИНФО ВНУТРИ ПРИБОРА */
.gauge-info { position: absolute; bottom: 25%; width: 100%; text-align: center; z-index: 4; }
.val-big { font-family: 'Orbitron'; font-size: 4vmin; color: #fff; text-shadow: 0 0 1vmin rgba(255,255,255,0.2); }
.val-label { font-size: 1.5vmin; color: #666; font-weight: bold; letter-spacing: 0.2vmin; margin-top: 0.5vmin; }

/* === ЦЕНТР === */
.center-stack {
  display: flex; flex-direction: column; align-items: center; gap: 2vmin;
  margin-bottom: 4vmin;
}

.gear-box {
  background: #000; padding: 1vmin 3vmin; border-radius: 1vmin; border: 1px solid #333;
  display: flex; flex-direction: column; align-items: center;
}
.gear-num { font-family: 'Orbitron'; font-size: 8vmin; color: #555; line-height: 1; }
.gear-label { font-size: 1.2vmin; color: #444; }

.temp { font-family: 'Orbitron'; color: #0f0; font-size: 2.5vmin; margin-top: 1vmin; }
.temp.alert { color: #f00; animation: blink 0.2s infinite; }

.btn-row { display: flex; gap: 2vmin; }
.btn {
  width: 9vmin; height: 9vmin; border-radius: 50%;
  background: linear-gradient(#222, #111); border: 0.4vmin solid #444;
  color: #666; font-weight: bold; font-size: 1.5vmin;
  display: flex; justify-content: center; align-items: center;
  cursor: pointer; box-shadow: 0 1vmin 2vmin #000;
  pointer-events: auto; /* ВАЖНО */
}
.btn:active { transform: scale(0.95); }
.btn.on { border-color: #0f0; color: #0f0; box-shadow: 0 0 2vmin rgba(0,255,0,0.2); }
.btn.active { border-color: #fff; color: #fff; box-shadow: 0 0 2vmin rgba(255,255,255,0.2); }
.btn.nitro.active { border-color: #00f; color: #00f; box-shadow: 0 0 2vmin #00f; }

/* === ПЕДАЛИ === */
.pedals-area {
  width: 100%; display: flex; justify-content: space-between; padding: 0 5vmin;
  position: absolute; bottom: 3vmin; pointer-events: none;
}
.pedal-box { pointer-events: auto; display: flex; flex-direction: column; align-items: center; }
.pedal {
  width: 12vmin; height: 25vmin; background: #0f0f0f; border: 0.4vmin solid #333;
  border-radius: 1.5vmin; position: relative; overflow: hidden; box-shadow: 0 1vmin 3vmin #000;
}
.pedal-bar { 
  position: absolute; bottom: 0; left: 0; width: 100%; 
  background: linear-gradient(to top, #ff9d00, transparent); 
  opacity: 0.8; transition: height 0.05s linear; 
}
.pedal-lbl { margin-top: 1vmin; color: #444; font-weight: bold; font-size: 2vmin; }

@keyframes blink { 0% {opacity: 1} 50% {opacity: 0.2} 100% {opacity: 1} }

